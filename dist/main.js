!function(n){var e={};function r(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=n,r.c=e,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)r.d(t,i,function(e){return n[e]}.bind(null,i));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="http://localhost:8888/",r(r.s="./src/jd.js")}({"./src/css/jd2.css":
/*!*************************!*\
  !*** ./src/css/jd2.css ***!
  \*************************/
/*! no static exports found */function(module,exports){eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=webpack:///./src/css/jd2.css?")},"./src/css/reset.css":
/*!***************************!*\
  !*** ./src/css/reset.css ***!
  \***************************/
/*! no static exports found */function(module,exports){eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=webpack:///./src/css/reset.css?")},"./src/jd.js":
/*!*******************!*\
  !*** ./src/jd.js ***!
  \*******************/
/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _css_jd2_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/jd2.css */ \"./src/css/jd2.css\");\n/* harmony import */ var _css_jd2_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_jd2_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css_reset_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./css/reset.css */ \"./src/css/reset.css\");\n/* harmony import */ var _css_reset_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_reset_css__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\nwindow.onload = function(){\r\n    /* 下拉时搜索框背景变化 */\r\n    function BackScroll(){\r\n        var navDom=document.querySelector('.jd-slider');\r\n        var floorDom=document.querySelector('.jd-floor');\r\n        var hh=document.querySelector('.jd-top');\r\n        var topheight=hh.offsetHeight;\r\n        var scrHeight=navDom.offsetHeight-topheight;\r\n        window.onscroll=function(){\r\n            var scrollDistance=0;\r\n            if (document.compatMode == \"BackCompat\") \r\n            { \r\n                 scrollDistance=window.document.body.scrollTop;\r\n            } \r\n            else \r\n            { \r\n                 scrollDistance=document.documentElement.scrollTop == 0 ? document.body.scrollTop : document.documentElement.scrollTop;\r\n            } \r\n            if(scrollDistance>scrHeight){\r\n                hh.style.background='red';\r\n            }\r\n            else{\r\n                hh.style.background='';\r\n            }\r\n        }\r\n    }\r\n    BackScroll();\r\n    /* 下拉图片懒加载 */\r\n    lazyimg();\r\n    document.addEventListener(\"scroll\",lazyimg);\r\n    var viewHeight =document.documentElement.clientHeight;\r\n    function lazyimg(){\r\n        var lazypic = document.querySelectorAll('img[data-original]');\r\n        Array.prototype.forEach.call(lazypic,function(item,index){\r\n            var rect;\r\n            if(item.dataset.original===\"\"){\r\n                return;\r\n            }\r\n            rect = item.getBoundingClientRect();\r\n            if(rect.bottom>0&&rect.top<viewHeight){\r\n                !function(){\r\n                    item.setAttribute(\"src\", \"http://localhost:8888/static/\"+item.dataset.original);\r\n                    item.removeAttribute(\"data-original\");\r\n                }();\r\n            }\r\n        });\r\n    }\r\n\r\n     /* 图片轮播 */\r\n     var imageCount = 8;\r\n     var slider = document.querySelector('.jd-slider');\r\n     var width = slider.offsetWidth;\r\n     var imageBox = slider.querySelector('.slider');\r\n     var pointBox = slider.querySelector('.slider-index');\r\n     var points = pointBox.querySelectorAll('li');\r\n\r\n     var addTransition = function () {\r\n         imageBox.style.transition = \"all 300ms ease\";\r\n         imageBox.style.webkitTransition = \"all 300ms ease\";\r\n     }\r\n\r\n     var clearTransition = function () {\r\n         imageBox.style.transition = \"none\";\r\n         imageBox.style.webkitTransition = \"none\";\r\n     }\r\n\r\n     var moveTranslateX = function (X) {\r\n         imageBox.style.transform = \"translateX(\"+X+\"px)\";\r\n         imageBox.style.webkitTransform = \"translateX(\"+X+\"px)\";\r\n     }\r\n\r\n     var index = 1;\r\n     var timer = setInterval(function(){\r\n         index++;\r\n         addTransition();\r\n         moveTranslateX(-index*width);\r\n     },3000);\r\n\r\n     jd.transitionEnd(imageBox,function(){\r\n         if(index > imageCount){\r\n             index = 1;\r\n         }\r\n         if(index <= 0){\r\n             index = imageCount;\r\n         }\r\n         clearTransition();\r\n         moveTranslateX(-index * width);\r\n         movePoint();\r\n     });\r\n\r\n     var movePoint = function () {\r\n         for(let i=0;i<points.length;i++){\r\n             points[i].className = \" \";\r\n         }\r\n         points[index-1].className = \"on\";\r\n     }\r\n\r\n     var startX = 0;\r\n     var moveX = 0;\r\n     var distanceX = 0;\r\n     var isMove = false;\r\n\r\n     imageBox.addEventListener('touchstart',function(event){\r\n         clearInterval(timer);\r\n         startX = event.touches[0].clientX;\r\n     });\r\n     imageBox.addEventListener('touchmove',function(event){\r\n         moveX = event.touches[0].clientX;\r\n         distanceX = moveX - startX;\r\n         clearTransition();\r\n         moveTranslateX(-index * width + distanceX);\r\n         isMove = true;\r\n     });\r\n     imageBox.addEventListener('touchend',function(e){\r\n         if(isMove){\r\n             /* 滑动超过1/3时，图片移动，否则返回 */\r\n             if(Math.abs(distanceX) > width/3){\r\n                if(distanceX > 0){\r\n                    index--;\r\n                }\r\n                if(distanceX < 0){\r\n                    index++;\r\n                }\r\n             }\r\n             addTransition();\r\n             moveTranslateX(-index*width);\r\n             if(index > imageCount ){\r\n                 index = 1;\r\n             }else if(index <= 0){\r\n                 index = imageCount;\r\n             }\r\n             movePoint();   \r\n             startX = 0;\r\n             moveX = 0;\r\n             distanceX = 0;\r\n             isMove = false;\r\n             clearInterval(timer);\r\n             timer= setInterval(function(){\r\n                 index++ ;\r\n                 addTransition();\r\n                 moveTranslateX(-index * width);\r\n             },3000);\r\n         }\r\n     });\r\n\r\n\r\n     /* 京东快报向上滚动 */\r\n     var newBox=document.querySelector('.news-list ul li');\r\n     var newBoxH = newBox.offsetHeight;\r\n    startmarquee(newBoxH,10,1500);\r\n    function startmarquee(newBoxH,speed,delay) {\r\n        var timer2 = null;\r\n        var _timer2 = null;\r\n        var marqueeBox = document.querySelector('.news-list ul');//滚动元素\r\n        marqueeBox.style.marginTop = 0;\r\n\r\n        function start(){\r\n            clearInterval(timer2);\r\n            timer2 = setInterval(scrolling,speed);\r\n            marqueeBox.style.marginTop=parseInt(marqueeBox.style.marginTop) - 1 + \"px\";\r\n        }\r\n        function scrolling(){\r\n            if(parseInt(marqueeBox.style.marginTop) % newBoxH != 0){  \r\n                marqueeBox.style.marginTop = parseInt(marqueeBox.style.marginTop) - 1 + \"px\";\r\n                /* 新闻播完时回到顶部 */\r\n                if(Math.abs(parseInt(marqueeBox.style.marginTop)) >= marqueeBox.scrollHeight){\r\n                    marqueeBox.style.marginTop = 0;\r\n                }                \r\n            }else{\r\n                clearInterval(timer2);\r\n                clearTimeout(_timer2);\r\n                _timer2=setTimeout(start,delay);\r\n            }\r\n        }\r\n        clearTimeout(_timer2);\r\n        _timer2=setTimeout(start,delay);\r\n    }\r\n    \r\n    /* 动态设置秒杀中图片大小 */\r\n\r\n        var skipeBox = document.querySelectorAll('.spike-container ul .spike-item');\r\n        \r\n        for(let i=0;i<skipeBox.length;i++){\r\n            skipeBox[i].style.width = document.documentElement.clientWidth*0.21505+\"px\";\r\n            var skipephotoBox=skipeBox[i].querySelector('.spike-photo');\r\n            skipephotoBox.style.height = document.documentElement.clientWidth*0.21505*0.876+'px';\r\n        }\r\n\r\n\r\n\r\n    left_scroll();\r\n    function left_scroll(){\r\n        var spikeContentBox=document.querySelector('.spike-content');\r\n    \r\n        var startX1=0;\r\n        var moveX1=0;\r\n        var distanceX1=0;\r\n        var skipe_transition=function(time){\r\n            spikeContentBox.style.transition='all .'+time+'s';\r\n            spikeContentBox.style.webkitTransition='all .'+time+'s';\r\n        }\r\n        var skipe_transitionnone=function(){\r\n            spikeContentBox.style.transition='none';\r\n            spikeContentBox.style.webkitTransition='none';\r\n        }\r\n        var skipe_translate=function(dist){\r\n            spikeContentBox.style.transform='translateX('+dist+'px)';\r\n            spikeContentBox.style.webkitTransition='translateX('+dist+'px)';\r\n        }\r\n\r\n        spikeContentBox.addEventListener('touchstart',function(event){\r\n            startX1=event.touches[0].clientX;\r\n        });\r\n        spikeContentBox.addEventListener('touchmove',function(event){\r\n            moveX1=event.touches[0].clientX-startX1;\r\n            console.log(moveX1);\r\n            skipe_transitionnone();\r\n            skipe_transition(3);\r\n            skipe_translate(moveX1);\r\n        });\r\n        spikeContentBox.addEventListener('touchend',function(event){\r\n            var SingleWidth=document.documentElement.clientWidth*0.21505;\r\n            distanceX1=moveX1/SingleWidth;\r\n            var dis=0;\r\n            if(distanceX1>0){\r\n                dis=Math.ceil(distanceX1);\r\n                skipe_transition(4);\r\n                skipe_translate(0);\r\n            }\r\n            if(distanceX1<0){\r\n                dis=Math.ceil(distanceX1)-1;\r\n                skipe_transition(4);\r\n                skipe_translate(dis*SingleWidth);\r\n            }\r\n        });\r\n    }\r\n }\r\n\r\n\n\n//# sourceURL=webpack:///./src/jd.js?")}});